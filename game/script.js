// JSON Quiz Data
const quizData = {
    "quiz": {
      "questions": [
        {
          "id": 1,
          "question": "What is the closest planet to the Sun?",
          "options": {
            "a": "Mars",
            "b": "Earth",
            "c": "Mercury",
            "d": "Venus"
          },
          "correctAnswer": "c"
        },
        {
          "id": 2,
          "question": "Which planet is known as the Red Planet?",
          "options": {
            "a": "Earth",
            "b": "Mars",
            "c": "Saturn",
            "d": "Jupiter"
          },
          "correctAnswer": "b"
        },
        {
          "id": 3,
          "question": "What is the largest planet in our solar system?",
          "options": {
            "a": "Earth",
            "b": "Mars",
            "c": "Saturn",
            "d": "Jupiter"
          },
          "correctAnswer": "d"
        },
        {
          "id": 4,
          "question": "Which planet is known for its prominent ring system?",
          "options": {
            "a": "Jupiter",
            "b": "Neptune",
            "c": "Saturn",
            "d": "Uranus"
          },
          "correctAnswer": "c"
        },
        {
          "id": 5,
          "question": "What is the name of the galaxy we live in?",
          "options": {
            "a": "Milky Way",
            "b": "Andromeda",
            "c": "Whirlpool",
            "d": "Sombrero"
          },
          "correctAnswer": "a"
        },
        {
          "id": 6,
          "question": "Which planet is often called Earth's \"twin\" due to its similar size?",
          "options": {
            "a": "Mars",
            "b": "Venus",
            "c": "Neptune",
            "d": "Mercury"
          },
          "correctAnswer": "b"
        },
        {
          "id": 7,
          "question": "How long does Earth take to orbit the Sun?",
          "options": {
            "a": "365 days",
            "b": "24 hours",
            "c": "30 days",
            "d": "100 days"
          },
          "correctAnswer": "a"
        },
        {
          "id": 8,
          "question": "What is the main gas found in the Sun?",
          "options": {
            "a": "Oxygen",
            "b": "Nitrogen",
            "c": "Hydrogen",
            "d": "Helium"
          },
          "correctAnswer": "c"
        },
        {
          "id": 9,
          "question": "What is the smallest planet in our solar system?",
          "options": {
            "a": "Mars",
            "b": "Earth",
            "c": "Mercury",
            "d": "Venus"
          },
          "correctAnswer": "c"
        },
        {
          "id": 10,
          "question": "What is the name of Earth's natural satellite?",
          "options": {
            "a": "Mars",
            "b": "The Moon",
            "c": "Titan",
            "d": "Europa"
          },
          "correctAnswer": "b"
        },
        {
          "id": 11,
          "question": "What is the shape of the Milky Way galaxy?",
          "options": {
            "a": "Irregular",
            "b": "Elliptical",
            "c": "Spiral",
            "d": "Ring"
          },
          "correctAnswer": "c"
        },
        {
          "id": 12,
          "question": "Which planet has the most moons?",
          "options": {
            "a": "Saturn",
            "b": "Jupiter",
            "c": "Neptune",
            "d": "Uranus"
          },
          "correctAnswer": "a"
        },
        {
          "id": 13,
          "question": "How many planets are in our solar system?",
          "options": {
            "a": "7",
            "b": "8",
            "c": "9",
            "d": "10"
          },
          "correctAnswer": "b"
        },
        {
          "id": 14,
          "question": "What is the speed of light?",
          "options": {
            "a": "300,000 km/s",
            "b": "150,000 km/s",
            "c": "400,000 km/s",
            "d": "500,000 km/s"
          },
          "correctAnswer": "a"
        },
        {
          "id": 15,
          "question": "What was the name of the first artificial satellite launched into space?",
          "options": {
            "a": "Voyager",
            "b": "Sputnik",
            "c": "Apollo",
            "d": "Hubble"
          },
          "correctAnswer": "b"
        },
        {
          "id": 16,
          "question": "Which planet is known as the \"Gas Giant\"?",
          "options": {
            "a": "Venus",
            "b": "Jupiter",
            "c": "Mercury",
            "d": "Mars"
          },
          "correctAnswer": "b"
        },
        {
          "id": 17,
          "question": "How long does it take for light from the Sun to reach Earth?",
          "options": {
            "a": "8 minutes",
            "b": "5 minutes",
            "c": "1 hour",
            "d": "30 seconds"
          },
          "correctAnswer": "a"
        },
        {
          "id": 18,
          "question": "What is the name of the first spacecraft to carry humans to the moon?",
          "options": {
            "a": "Voyager",
            "b": "Apollo 11",
            "c": "Columbia",
            "d": "Challenger"
          },
          "correctAnswer": "b"
        },
        {
          "id": 19,
          "question": "Which planet has a surface temperature hot enough to melt lead?",
          "options": {
            "a": "Mercury",
            "b": "Venus",
            "c": "Mars",
            "d": "Jupiter"
          },
          "correctAnswer": "b"
        },
        {
          "id": 20,
          "question": "Which planet is farthest from the Sun?",
          "options": {
            "a": "Neptune",
            "b": "Uranus",
            "c": "Saturn",
            "d": "Jupiter"
          },
          "correctAnswer": "a"
        },
        {
          "id": 21,
          "question": "Which planet has a Great Red Spot?",
          "options": {
            "a": "Mars",
            "b": "Venus",
            "c": "Jupiter",
            "d": "Saturn"
          },
          "correctAnswer": "c"
        },
        {
          "id": 22,
          "question": "What is the second-largest planet in the solar system?",
          "options": {
            "a": "Uranus",
            "b": "Neptune",
            "c": "Saturn",
            "d": "Jupiter"
          },
          "correctAnswer": "c"
        },
        {
          "id": 23,
          "question": "What is the closest star to Earth?",
          "options": {
            "a": "Proxima Centauri",
            "b": "Alpha Centauri",
            "c": "The Sun",
            "d": "Sirius"
          },
          "correctAnswer": "c"
        },
        {
          "id": 24,
          "question": "What is the smallest dwarf planet in the solar system?",
          "options": {
            "a": "Eris",
            "b": "Haumea",
            "c": "Pluto",
            "d": "Ceres"
          },
          "correctAnswer": "d"
        },
        {
          "id": 25,
          "question": "What is the name of the region between Mars and Jupiter where most asteroids are found?",
          "options": {
            "a": "Oort Cloud",
            "b": "Kuiper Belt",
            "c": "Asteroid Belt",
            "d": "Orion Arm"
          },
          "correctAnswer": "c"
        },
        {
          "id": 26,
          "question": "What is the term for the path a planet takes around the Sun?",
          "options": {
            "a": "Orbit",
            "b": "Rotation",
            "c": "Revolution",
            "d": "Axis"
          },
          "correctAnswer": "a"
        },
        {
          "id": 27,
          "question": "What is the name of the largest volcano in the solar system?",
          "options": {
            "a": "Olympus Mons",
            "b": "Mount Everest",
            "c": "Mauna Loa",
            "d": "Tharsis Ridge"
          },
          "correctAnswer": "a"
        },
        {
          "id": 28,
          "question": "What is the name of the first American astronaut to orbit the Earth?",
          "options": {
            "a": "John Glenn",
            "b": "Neil Armstrong",
            "c": "Yuri Gagarin",
            "d": "Alan Shepard"
          },
          "correctAnswer": "a"
        },
        {
          "id": 29,
          "question": "What is the term for the boundary around a black hole beyond which nothing can escape?",
          "options": {
            "a": "Event Horizon",
            "b": "Singularity",
            "c": "Wormhole",
            "d": "Accretion Disk"
          },
          "correctAnswer": "a"
        },
        {
          "id": 30,
          "question": "What is the only planet in our solar system not named after a god or goddess?",
          "options": {
            "a": "Venus",
            "b": "Mars",
            "c": "Earth",
            "d": "Neptune"
          },
          "correctAnswer": "c"
        }
      ]
    }
  };
  
// Variables for quiz
let currentQuestionIndex = 0;
let score = 0;
let questionsToAsk = [];

// Function to show the quiz and hide the welcome message
function showQuiz() {
    const welcomeMessage = document.getElementById("welcome-message");
    welcomeMessage.style.display = "none"; // Hide welcome message
    startQuiz(); // Start the quiz
}

// Function to start the quiz
function startQuiz() {
    // Hide the result container when restarting
    const resultContainer = document.getElementById("result-container");
    resultContainer.style.display = "none"; // Hide the result container

    const quizContainer = document.getElementById("quiz-container");
    quizContainer.style.display = "block"; // Show the quiz container

    questionsToAsk = getRandomQuestions(3); // Get 3 random questions
    currentQuestionIndex = 0;
    score = 0;
    updateScoreBox(); // Initialize the score box
    displayQuestion();
}

// Function to update the score box
function updateScoreBox() {
    const scoreBox = document.getElementById("score-box");
    scoreBox.textContent = `Questions Asked: ${currentQuestionIndex + 1} | Correct Answers: ${score}`;
}

// Function to get random questions
function getRandomQuestions(num) {
    const questions = quizData.quiz.questions;
    const shuffled = questions.sort(() => 0.5 - Math.random());
    return shuffled.slice(0, num);
}

// Function to display the current question
function displayQuestion() {
    const questionContainer = document.getElementById("question-container");
    const optionsContainer = document.getElementById("options-container");
    const quizContainer = document.getElementById("quiz-container");

    if (currentQuestionIndex < questionsToAsk.length) {
        quizContainer.style.opacity = 0; // Fade out
        setTimeout(() => {
            const currentQuestion = questionsToAsk[currentQuestionIndex];
            questionContainer.textContent = currentQuestion.question;
            optionsContainer.innerHTML = ""; // Clear previous options

            Object.entries(currentQuestion.options).forEach(([key, value]) => {
                const button = document.createElement("button");
                button.innerHTML = `<i class="fas fa-check"></i> ${value}`;
                button.onclick = () => selectAnswer(key);
                optionsContainer.appendChild(button);
            });

            quizContainer.style.opacity = 1; // Fade in
        }, 500);
    } else {
        showResult();
    }
}

// Function to handle answer selection
function selectAnswer(selected) {
    const currentQuestion = questionsToAsk[currentQuestionIndex];
    const notification = document.getElementById("notification");

    if (selected === currentQuestion.correctAnswer) {
        score++;
        notification.textContent = "Correct! ðŸŽ‰";
        notification.style.color = "green"; // Change text color to green
    } else {
        // Show the correct answer
        notification.textContent = `Wrong! The correct answer is: ${currentQuestion.options[currentQuestion.correctAnswer]} âŒ`;
        notification.style.color = "red"; // Change text color to red
    }

    notification.style.display = "block"; // Show the notification
    setTimeout(() => {
        notification.style.display = "none"; // Hide the notification after 2 seconds
    }, 3000);

    currentQuestionIndex++;
    updateScoreBox(); // Update the score box after answering

    // Check if the user has answered all questions
    if (currentQuestionIndex === questionsToAsk.length) {
        showResult();
    } else {
        displayQuestion(); // Move to next question
    }

    // Redirect to game.html if all answers are correct
    if (currentQuestionIndex === questionsToAsk.length && score === questionsToAsk.length) {
        window.location.href = "game.html"; // Redirect to the game page
    }
}

// Function to show result
function showResult() {
    const resultContainer = document.getElementById("result-container");
    const resultMessage = document.getElementById("result-message");
    resultContainer.style.display = "block"; // Show result container
    resultMessage.textContent = `You scored ${score} out of ${questionsToAsk.length}!`;
}

// Start the quiz on page load
window.onload = () => {
    // Initially, only show the welcome message
    document.getElementById("quiz-container").style.display = "none";
    document.getElementById("result-container").style.display = "none";
};